<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>å¿«é€Ÿå®ç°æš—ç½‘äº¤æ˜“ç›‘æ§ - è¿›å‡»çš„Hunter</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta name="generator" content="Hugo 0.53" />
	<meta property="og:title" content="å¿«é€Ÿå®ç°æš—ç½‘äº¤æ˜“ç›‘æ§" />
<meta property="og:description" content="æš—ç½‘æˆ–è®¸å¯¹å¤§å¤šæ•°äººæ¥è¯´éƒ½æ˜¯ä¸€ä¸ªé™Œç”Ÿçš„åè¯ï¼Œä½†å¯¹äºä¸€ä¸ªå®‰å…¨äººå‘˜å´æ˜¯å¿…ä¸å¯å°‘çš„ä¸€æ ·çš„ä¸œè¥¿ã€‚æš—ç½‘ä¹‹å†…é±¼é¾™æ··æ‚ï¼Œå†…å«çš„æ´»åŠ¨å†…å®¹ä¹Ÿæ˜¯å‚å·®ä¸é½ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pyocean.com/post/2018_12_24_%E5%BF%AB%E9%80%9F%E5%AE%9E%E7%8E%B0%E6%9A%97%E7%BD%91%E4%BA%A4%E6%98%93%E7%9B%91%E6%8E%A7/" /><meta property="article:published_time" content="2018-12-24T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2018-12-24T00:00:00&#43;00:00"/>

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å¿«é€Ÿå®ç°æš—ç½‘äº¤æ˜“ç›‘æ§"/>
<meta name="twitter:description" content="æš—ç½‘æˆ–è®¸å¯¹å¤§å¤šæ•°äººæ¥è¯´éƒ½æ˜¯ä¸€ä¸ªé™Œç”Ÿçš„åè¯ï¼Œä½†å¯¹äºä¸€ä¸ªå®‰å…¨äººå‘˜å´æ˜¯å¿…ä¸å¯å°‘çš„ä¸€æ ·çš„ä¸œè¥¿ã€‚æš—ç½‘ä¹‹å†…é±¼é¾™æ··æ‚ï¼Œå†…å«çš„æ´»åŠ¨å†…å®¹ä¹Ÿæ˜¯å‚å·®ä¸é½ã€‚"/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="shortcut icon" href="/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-135738940-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="è¿›å‡»çš„Hunter" rel="home">
				<div class="logo__title">è¿›å‡»çš„Hunter</div>
				<div class="logo__tagline">Uneasy lies the head that wears the crown.</div>
			</a>
		</div>
		<a href="https://github.com/aoii103/every_day_cmd"><div id="every_day_cmd" class="every_day_cmd" title="å­—å­—ç ç‘ï¼Œæ¯æ—¥ä¸€è®°ã€‚" ></div></a>
<div class="divider"></div>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
	axios.get('https://pyocean.com/every_day_cmd').then(resp => {
		document.getElementById('every_day_cmd').innerHTML = `ğŸº ${resp.data.description}: <code>${resp.data.code}</code>`
	})
</script>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">å¿«é€Ÿå®ç°æš—ç½‘äº¤æ˜“ç›‘æ§</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2018-12-24T00:00:00">December 24, 2018</time>
</div>
</div>
		</header>
		<figure class="post__thumbnail">
			<img src="/img/content_img/darknet/new_mosaic.jpg" alt="å¿«é€Ÿå®ç°æš—ç½‘äº¤æ˜“ç›‘æ§">
		</figure>
<div class="post__toc toc">
	<div class="toc__title">Page content</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#åŠŸèƒ½ç®€è¦">åŠŸèƒ½ç®€è¦</a></li>
<li><a href="#é€»è¾‘è„‘å›¾">é€»è¾‘è„‘å›¾</a></li>
<li><a href="#åˆ†æè¿‡ç¨‹">åˆ†æè¿‡ç¨‹</a></li>
</ul></li>
</ul></li>
<li><a href="#ormæ¨¡å‹">ORMæ¨¡å‹</a></li>
<li><a href="#ä»£ç è¿è¡Œç»“æœ">ä»£ç è¿è¡Œç»“æœ</a></li>
<li><a href="#grafanaå¯è§†åŒ–">Grafanaå¯è§†åŒ–</a></li>
</ul>
</nav>
	</div>
</div>
<div class="content post__content clearfix">
			<p>æš—ç½‘æˆ–è®¸å¯¹å¤§å¤šæ•°äººæ¥è¯´éƒ½æ˜¯ä¸€ä¸ªé™Œç”Ÿçš„åè¯ï¼Œä½†å¯¹äºä¸€ä¸ªå®‰å…¨äººå‘˜å´æ˜¯å¿…ä¸å¯å°‘çš„ä¸€æ ·çš„ä¸œè¥¿ã€‚æš—ç½‘ä¹‹å†…é±¼é¾™æ··æ‚ï¼Œå†…å«çš„æ´»åŠ¨å†…å®¹ä¹Ÿæ˜¯å‚å·®ä¸é½ã€‚</p>

<p><img src="/img/content_img/darknet/wikires_1.png" alt="" /></p>

<p>å…¶ä¸­ä¸ä¹å„ç±»çš„äº¤æ˜“é»‘å¸‚ï¼Œä¸”äº¤æ˜“å†…å®¹ä¹Ÿè®©äººè§¦ç›®æƒŠå¿ƒã€‚(æŠ¤çœ¼)</p>

<p><img src="/img/content_img/darknet/datasdemo_1.png" alt="" /></p>

<p>äºæ˜¯æˆ‘ä»¬é’ˆå¯¹ <code>deepmix2z2ayzi46.onion</code> æš—ç½‘ä¸­æ–‡ç½‘ç¼–å†™äº†ä¸€ä¸ªç›‘æ§çˆ¬è™«ä½œä¸ºå®è·µæ¡ˆä¾‹ã€‚</p>

<h3 id="åŠŸèƒ½ç®€è¦">åŠŸèƒ½ç®€è¦</h3>

<ul>
<li>è‡ªåŠ¨æ³¨å†Œ</li>
<li>è‡ªåŠ¨ç™»å½•</li>
<li>é˜²å°ç¦ç­–ç•¥</li>
<li>ORMäº¤äº’</li>
<li>äº‹ä»¶è¯¦æƒ…/æ ·æœ¬ä¿¡æ¯å½•å…¥</li>
<li>äº‹ä»¶æé†’ï¼ˆtelegramï¼‰</li>
</ul>

<h3 id="é€»è¾‘è„‘å›¾">é€»è¾‘è„‘å›¾</h3>

<p>é¦–å…ˆæ”¾å‡ºæ•´ä¸ªç¨‹åºçš„é€»è¾‘å›¾ã€‚</p>

<p><img src="/img/content_img/darknet/DarkNet.png" alt="" /></p>

<h3 id="åˆ†æè¿‡ç¨‹">åˆ†æè¿‡ç¨‹</h3>

<p>ä¸‹é¢æˆ‘ä»¬ç®€å•è®²ä¸€ä¸‹è¯¥ç½‘ç«™çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨è¿›å…¥è¯¥ç½‘ç«™åç½‘ç«™ä»¥ä¸€ä¸ª *<code>PHPSESSID</code>*Cookie ä½œä¸ºç”¨æˆ·æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„èº«ä»½IDï¼Œè¿‡æœŸæ—¶é—´ä¸º1å°æ—¶ï¼Œä¸”ä¸ä¼šè‡ªåŠ¨å»¶é•¿ã€‚</p>

<p><img src="/img/content_img/darknet/cookie.png" alt="" /></p>

<p>åªæœ‰é å†æ¬¡ç™»å½•æ‰èƒ½åˆ·ä¸ªæ–°çš„èº«ä»½ã€‚é‚£ä¹ˆåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦è®¾å®šä¸€ä¸ªSessionä¼šè¯æ¥è‡ªåŠ¨å¤„ç†è¿™ä¸ªcookieã€‚å¹¶é…ç½®socks5ä»£ç†ï¼Œå…³äºtorçš„å®‰è£…ä¸å†èµ˜è¿°ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">self<span style="color:#f92672">.</span>session <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>Session()
self<span style="color:#f92672">.</span>session<span style="color:#f92672">.</span>headers <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;Accept&#34;</span>: <span style="color:#e6db74">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8&#34;</span>,
    <span style="color:#e6db74">&#34;Accept-Encoding&#34;</span>: <span style="color:#e6db74">&#34;gzip, deflate&#34;</span>,
    <span style="color:#e6db74">&#34;Accept-Language&#34;</span>: <span style="color:#e6db74">&#34;zh-CN,zh;q=0.9,en;q=0.8&#34;</span>,
    <span style="color:#e6db74">&#34;Cache-Control&#34;</span>: <span style="color:#e6db74">&#34;max-age=0&#34;</span>,
    <span style="color:#e6db74">&#34;Connection&#34;</span>: <span style="color:#e6db74">&#34;keep-alive&#34;</span>,
    <span style="color:#e6db74">&#34;Referer&#34;</span>: <span style="color:#e6db74">&#34;http://bmp3qqimv55xdznb.onion/index.php&#34;</span>,
    <span style="color:#e6db74">&#34;Upgrade-Insecure-Requests&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
    <span style="color:#e6db74">&#34;User-Agent&#34;</span>: <span style="color:#e6db74">&#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36&#34;</span>
}
self<span style="color:#f92672">.</span>proxy_url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;socks5h://127.0.0.1:9150&#39;</span>
self<span style="color:#f92672">.</span>session<span style="color:#f92672">.</span>proxies <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#39;https&#39;</span>: self<span style="color:#f92672">.</span>proxy_url,
    <span style="color:#e6db74">&#39;http&#39;</span>: self<span style="color:#f92672">.</span>proxy_url
}</code></pre></div>
<p>æˆ–è®¸æœ‰åŒå­¦ä¼šæ³¨æ„åˆ°è¿™é‡Œä½¿ç”¨çš„æ˜¯ <em><code>socks5h://</code></em> åè®®ï¼Œé‚£ä¹ˆ <em><code>Requests</code></em> æ¨¡å—æ–‡æ¡£ä¸­æœ‰æ³¨è§£ã€‚å› ä¸ºå¸¸è§„DNSæœåŠ¡å™¨å¹¶ä¸èƒ½è§£æ<code>*.onion</code>åœ°å€è€ŒTorç½‘ç»œå¯ä»¥ã€‚</p>

<p><img src="/img/content_img/darknet/usesocks5h.png" alt="" /></p>

<p>è€Œåæˆ‘ä»¬éœ€è¦æ³¨å†Œï¼Œè¿™é‡Œè¦æ³¨æ„çš„åœ¨æ­£å¼è¿›å…¥æ³¨å†Œç•Œé¢ä¹‹å‰éœ€è¦å…ˆåŒæ„ä¸€ä¸ªxxxåè®®ï¼Œè€Œè¿™è¿‡ç¨‹ä¸ºä¸€ä¸ªPostè¯·æ±‚ã€‚</p>

<p><img src="/img/content_img/darknet/reg1_html.png" alt="" /></p>

<p>å¹¶ä¸”æ ¹æ®å¤šæ¬¡æµ‹è¯•å¾—å‡ºï¼Œå¦‚æœä¸å…ˆå‘é€è¯¥è¯·æ±‚ï¼Œåˆ™æ— æ³•è¿›å…¥æ³¨å†Œç•Œé¢ã€‚è€ƒè™‘åˆ°è¿™é‡Œä½¿ç”¨çš„ä¸ºForm Dataï¼Œé‚£ä¹ˆæºæ•°æ®å°±ç›´æ¥å­˜åœ¨äºHTMLä¸­ã€‚</p>

<blockquote>
<p>å› åç»­æ³¨å†Œï¼Œç™»å½•å‡ä½¿ç”¨Formï¼Œè¡¨å•ä½ç½®ä¸å†èµ˜è¿°</p>
</blockquote>

<p><img src="/img/content_img/darknet/reg1_html2.png" alt="" /></p>

<p>äºæ˜¯æˆ‘ä»¬ä½¿ç”¨<code>css selector</code>è¯­æ³•æ¥å–åˆ°å„ä¸ªå­—æ®µï¼Œé€šè¿‡æ­£åˆ™å–åˆ°<code>sid</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># å–åˆ°sid</span>
self<span style="color:#f92672">.</span>sid <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#39;sid=(.*?)&#34;&#39;</span>, step1resp)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># å–åˆ°token</span>
token <span style="color:#f92672">=</span> step1(<span style="color:#e6db74">&#39;input[name=&#34;form_token&#34;]&#39;</span>)<span style="color:#f92672">.</span>attr(<span style="color:#e6db74">&#39;value&#39;</span>)

<span style="color:#75715e"># å–åˆ°creation_time</span>
creation_time <span style="color:#f92672">=</span> step1(<span style="color:#e6db74">&#39;input[name=&#34;creation_time&#34;]&#39;</span>)<span style="color:#f92672">.</span>attr(<span style="color:#e6db74">&#39;value&#39;</span>)

<span style="color:#75715e"># ç”ŸæˆURL</span>
url <span style="color:#f92672">=</span> f<span style="color:#e6db74">&#34;http://{self.domain}/ucp.php?mode=register&amp;sid={self.sid}&#34;</span>

<span style="color:#75715e"># å‘é€è¯·æ±‚</span>
step2resp <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>session<span style="color:#f92672">.</span>post(url, data<span style="color:#f92672">=</span>{
    <span style="color:#e6db74">&#34;agreed&#34;</span>: <span style="color:#e6db74">&#34;===å¥½çš„,æˆ‘å·²æ˜ç™½,è¯·è·³è½¬åˆ°ä¸‹ä¸€é¡µç»§ç»­æ³¨å†Œ====&#34;</span>,
    <span style="color:#e6db74">&#34;change_lang&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#e6db74">&#34;creation_time&#34;</span>: creation_time,
    <span style="color:#e6db74">&#34;form_token&#34;</span>: token
}, headers<span style="color:#f92672">=</span>headers)</code></pre></div>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æˆåŠŸå¾—è¿›å…¥åˆ°äº†æ³¨å†Œç•Œé¢ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç”¨æˆ·åå¯†ç éœ€è¦åŒæ—¶åŒ…å«å¤§å°å†™å­—ç¬¦åŠæ•°å­—ï¼ŒèŒƒå›´6-20ï¼Œäºæ˜¯æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªéšæœºå¯†ç ç”Ÿæˆå™¨</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#a6e22e">@staticmethod</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">RandomKey</span>(length<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>):
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join((random<span style="color:#f92672">.</span>choice(random<span style="color:#f92672">.</span>choice((string<span style="color:#f92672">.</span>ascii_uppercase, string<span style="color:#f92672">.</span>ascii_lowercase, <span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join(map(str, range(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">9</span>)))))) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,  length)))</code></pre></div>
<p>å¹¶æ¨¡æ‹Ÿæ³¨å†Œè¿‡ç¨‹ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># è·å–ç¬¬äºŒæ­¥çš„respå†…å®¹</span>
step2 <span style="color:#f92672">=</span> jq(step2resp<span style="color:#f92672">.</span>text)

<span style="color:#75715e"># å–åˆ°æ–°token</span>
token <span style="color:#f92672">=</span> step2(<span style="color:#e6db74">&#39;input[name=&#34;form_token&#34;]&#39;</span>)<span style="color:#f92672">.</span>attr(<span style="color:#e6db74">&#39;value&#39;</span>)

<span style="color:#75715e"># å–åˆ°åˆ›å»ºæ—¶é—´</span>
creation_time <span style="color:#f92672">=</span> step2(<span style="color:#e6db74">&#39;input[name=&#34;creation_time&#34;]&#39;</span>)<span style="color:#f92672">.</span>attr(<span style="color:#e6db74">&#39;value&#39;</span>)

<span style="color:#75715e"># éšæœºè´¦æˆ·</span>
self<span style="color:#f92672">.</span>usr <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>RandomKey()
self<span style="color:#f92672">.</span>pwd <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>RandomKey()

<span style="color:#75715e"># ç”Ÿæˆpayload</span>
data <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;username&#34;</span>: self<span style="color:#f92672">.</span>usr,
    <span style="color:#e6db74">&#34;new_password&#34;</span>: self<span style="color:#f92672">.</span>pwd,
    <span style="color:#e6db74">&#34;password_confirm&#34;</span>: self<span style="color:#f92672">.</span>pwd,
    <span style="color:#e6db74">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;xxxx@xxxx.xxx&#34;</span>,
    <span style="color:#e6db74">&#34;lang&#34;</span>: <span style="color:#e6db74">&#34;zh_cmn_hans&#34;</span>,
    <span style="color:#e6db74">&#34;tz_date&#34;</span>: <span style="color:#e6db74">&#34;UTC+08:00+-+Asia/Brunei+-+&#34;</span> <span style="color:#f92672">+</span> moment<span style="color:#f92672">.</span>now()<span style="color:#f92672">.</span>format(<span style="color:#e6db74">&#34;DD+MMæœˆ+YYYY,+HH:mm&#34;</span>),
    <span style="color:#e6db74">&#34;tz&#34;</span>: <span style="color:#e6db74">&#34;Asia/Hong_Kong&#34;</span>,
    <span style="color:#e6db74">&#34;agreed&#34;</span>: <span style="color:#e6db74">&#34;true&#34;</span>,
    <span style="color:#e6db74">&#34;change_lang&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#e6db74">&#34;submit&#34;</span>: <span style="color:#e6db74">&#34; ç”¨æˆ·åä¸å¯†ç å·²å¡«å¥½,+ç‚¹æ­¤æäº¤ &#34;</span>,
    <span style="color:#e6db74">&#34;creation_time&#34;</span>: creation_time,
    <span style="color:#e6db74">&#34;form_token&#34;</span>: token
}

<span style="color:#75715e"># å‘é€æ³¨å†Œè¯·æ±‚</span>
resp <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>session<span style="color:#f92672">.</span>post(url, data<span style="color:#f92672">=</span>data, headers<span style="color:#f92672">=</span>headers)

<span style="color:#75715e"># åˆ¤æ–­æ˜¯å¦æ³¨å†ŒæˆåŠŸï¼Œå¤±è´¥åˆ™è§¦å‘retryé‡æ–°æ³¨å†Œ</span>
<span style="color:#66d9ef">assert</span> <span style="color:#e6db74">&#39;æ„Ÿè°¢æ³¨å†Œ&#39;</span> <span style="color:#f92672">in</span> resp<span style="color:#f92672">.</span>text

<span style="color:#75715e"># æˆåŠŸåˆ™ä¿å­˜è´¦æˆ·</span>
DarkNet_User<span style="color:#f92672">.</span>create(<span style="color:#f92672">**</span>{
    <span style="color:#e6db74">&#39;user&#39;</span>: self<span style="color:#f92672">.</span>usr,
    <span style="color:#e6db74">&#39;pwd&#39;</span>: self<span style="color:#f92672">.</span>pwd
})</code></pre></div>
<p>ç„¶åä»¥ä¸‹æ˜¯å®é™…æ³¨å†Œæ•ˆæœã€‚å› ä¸ºä½¿ç”¨çš„æ˜¯ä½›ç³»æ³¨å†Œç­–ç•¥ï¼Œæ‰€ä»¥æœ‰é‚£ä¹ˆå¤šã€‚ã€‚</p>

<p><img src="/img/content_img/darknet/reg_res.png" alt="" /></p>

<p>åœ¨æ³¨å†Œå®Œæˆä¹‹åæˆ‘ä»¬éœ€è¦å¼€å§‹è¿›è¡Œç™»å½•æ“ä½œã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># ç™»å½•URL</span>
url <span style="color:#f92672">=</span> f<span style="color:#e6db74">&#39;http://{self.domain}/ucp.php?mode=login&#39;</span>

<span style="color:#75715e"># å°è£…payload</span>
data <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;username&#34;</span>: self<span style="color:#f92672">.</span>usr,
    <span style="color:#e6db74">&#34;password&#34;</span>: self<span style="color:#f92672">.</span>pwd,
    <span style="color:#e6db74">&#34;login&#34;</span>: <span style="color:#e6db74">&#34;ç™»å½•&#34;</span>,
    <span style="color:#e6db74">&#34;redirect&#34;</span>: f<span style="color:#e6db74">&#34;./index.php&amp;sid={self.sid}&#34;</span>
}

<span style="color:#75715e"># å‘é€ç™»å½•</span>
resp <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>session<span style="color:#f92672">.</span>post(url, data<span style="color:#f92672">=</span>data, verify<span style="color:#f92672">=</span>False, timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">120</span>)

<span style="color:#75715e"># åˆ¤æ–­æ˜¯å¦æˆåŠŸç™»å½•</span>
<span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>usr <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> resp<span style="color:#f92672">.</span>text:
	
	<span style="color:#75715e"># å¦‚æœè¢«å°ç¦åˆ™æ‹‰é»‘è¯¥è´¦æˆ·å¹¶é‡æ–°æ³¨å†Œ</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#34;å·²è¢«å°ç¦&#34;</span> <span style="color:#f92672">in</span> resp<span style="color:#f92672">.</span>text:
        DarkNet_User<span style="color:#f92672">.</span>update({
            <span style="color:#e6db74">&#34;useful&#34;</span>: False
        })<span style="color:#f92672">.</span>where(DarkNet_User<span style="color:#f92672">.</span>user <span style="color:#f92672">==</span> self<span style="color:#f92672">.</span>usr)<span style="color:#f92672">.</span>execute()
    self<span style="color:#f92672">.</span>Reg()
    
    <span style="color:#75715e"># æ³¨å†Œå®Œæˆè§¦å‘retry</span>
    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span></code></pre></div>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å–åˆ°äº†ç™»å½•åçš„å“åº”ç•Œé¢ä¹Ÿå°±æ˜¯ä¸»é¡µï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ ç›®æŒ‰ <code>.ad_div_b</code>æ¥åˆ†å¸ƒã€‚</p>

<p><img src="/img/content_img/darknet/main.png" alt="" /></p>

<p>å¹¶ä¸”åœ¨æŸ¥çœ‹æ›´å¤šé€‰é¡¹ä¸ºè¯¥æ ç›®çš„è¯¦æƒ…é¦–é¡µã€‚é‚£ä¹ˆæˆ‘é€šè¿‡å¦‚ä¸‹ä»£ç è·å–å…¨éƒ¨çš„ç±»å‹</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">self<span style="color:#f92672">.</span>types <span style="color:#f92672">=</span> {item(<span style="color:#e6db74">&#39;.index_list_title&#39;</span>)<span style="color:#f92672">.</span>attr(<span style="color:#e6db74">&#39;href&#39;</span>)<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;=&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;&amp;&#39;</span>)[<span style="color:#ae81ff">0</span>]: item(<span style="color:#e6db74">&#39;tr:nth-child(1) &gt; td&#39;</span>)<span style="color:#f92672">.</span>text()<span style="color:#f92672">.</span>split()[<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> jq(resp<span style="color:#f92672">.</span>text)(<span style="color:#e6db74">&#39;.ad_table_b&#39;</span>)<span style="color:#f92672">.</span>items()}</code></pre></div>
<p><img src="/img/content_img/darknet/types.png" alt="" /></p>

<p>ç„¶åæˆ‘ä»¬è¿­ä»£è¿™äº›ç±»å‹ï¼Œå¹¶å°†å…¶qeaidã€é¡µç pageåŠå…¶ä»–å‚æ•°ä»£å…¥æ¨¡æ¿URLï¼Œä»¥æŠ“å–æ ç›®æœ€å¤§é¡µæ•°åŠè¯¦ç»†åˆ—è¡¨ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">http://{self.domain}/pay/user_area.php?page_y1={page}<span style="color:#960050;background-color:#1e0010">&amp;</span>q_u_id=0<span style="color:#960050;background-color:#1e0010">&amp;</span>m_order=<span style="color:#960050;background-color:#1e0010">&amp;</span>q_ea_id={qeaid}<span style="color:#960050;background-color:#1e0010">&amp;</span>sid={self.sid}#page_y1</code></pre></div>
<p><img src="/img/content_img/darknet/datalist.png" alt="" /></p>

<blockquote>
<p>åœ¨è·å–é¡µç çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°†å­—ç¬¦ä¸²åšä¸€ä¸ªsplit+joinæ“ä½œä»¥å»é™¤æ‰€æœ‰çš„åˆ†éš”ç¬¦ã€‚</p>
</blockquote>

<p>æ ¹æ®åˆ†æç•Œé¢ç»“æœå¾—å‡º <code>table.m_area_a tr</code>è·¯å¾„ä¸‹çš„æ¯ä¸ª<code>div.length_400&gt;a</code>å…ƒç´ çš„hrefä¸ä¸ºç©ºï¼Œåˆ™ä¸ºä¸€æ¡æ•°æ®ã€‚æ ¹æ®è¿™æ ·çš„è§„åˆ™æˆ‘ä»¬ç¼–å†™å¦‚ä¸‹ä»£ç ï¼Œå¹¶è·å–éƒ¨åˆ†åŸºç¡€æ•°æ®ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> jqdata(<span style="color:#e6db74">&#39;table.m_area_a tr&#39;</span>)<span style="color:#f92672">.</span>items():
    detailPath <span style="color:#f92672">=</span> item(<span style="color:#e6db74">&#39;div.length_400&gt;a&#39;</span>)<span style="color:#f92672">.</span>attr(<span style="color:#e6db74">&#39;href&#39;</span>)
    <span style="color:#66d9ef">if</span> detailPath:
    
    	<span style="color:#75715e"># ç»„åˆURL</span>
        detailsURL <span style="color:#f92672">=</span> urljoin(resp<span style="color:#f92672">.</span>url, detailPath)
        self<span style="color:#f92672">.</span>GetDetails(detailsURL, {
        
        	<span style="color:#75715e"># ä¿æŠ¤æœŸï¼Œé»˜è®¤ä¸€èˆ¬éƒ½ä¸º15å¤©</span>
            <span style="color:#e6db74">&#39;lines&#39;</span>:  FixNums(item(<span style="color:#e6db74">&#39;td:nth-child(7)&#39;</span>)<span style="color:#f92672">.</span>text()<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;å¤©&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)),
            
            <span style="color:#75715e"># çƒ­åº¦ï¼Œå…³æ³¨äººæ•°</span>
            <span style="color:#e6db74">&#39;hot&#39;</span>: FixNums(item(<span style="color:#e6db74">&#39;td:nth-child(8)&#39;</span>)<span style="color:#f92672">.</span>text()),
            
            <span style="color:#75715e"># äº‹ä»¶æ ‡é¢˜</span>
            <span style="color:#e6db74">&#39;title&#39;</span>: item(<span style="color:#e6db74">&#39;td:nth-child(5)&#39;</span>)<span style="color:#f92672">.</span>text(),
            
            <span style="color:#75715e"># ç±»å‹</span>
            <span style="color:#e6db74">&#39;area&#39;</span>: item(<span style="color:#e6db74">&#39;td:nth-child(3)&#39;</span>)<span style="color:#f92672">.</span>text()
        })</code></pre></div>
<p>åœ¨è·å–ç®­å¤´æŒ‡ç¤ºæœ€å¤§é¡µæ•°åï¼Œä¸æ–­ç¿»é¡µè¿­ä»£ä¸Šé¢çš„è¿‡ç¨‹ä»¥çˆ¬å–å…¨éƒ¨é¡µç åŠç±»å‹ã€‚</p>

<blockquote>
<p>éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬è·å–åˆ°çš„ä¸ä¸€å®šæ˜¯çœŸå®æœ€å¤§é¡µç -ã€‚-ï¼Œåœ¨çˆ¬è¡Œçš„æ—¶å€™éœ€è¦åˆ¤æ–­ç»“æœåˆ—è¡¨æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœä¸ºç©ºåˆ™ä¸ºåˆ°è¾¾å°¾é¡µéœ€breakè·³å‡º</p>
</blockquote>

<p>å¾—åˆ°åˆ—è¡¨ä¸­çš„æ¯æ¡æ•°æ®ä¹‹åï¼Œä¸ºäº†è·å–è¯¦æƒ…ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿›ä¸€æ­¥çš„å…¶è¯¦æƒ…ç•Œé¢è¿›è¡ŒæŠ“å–ã€‚æ­¥éª¤ä¾ç„¶ä¸ºæ ¹æ®<code>css selector</code>è·¯å¾„æ¥å–åˆ°æ•°æ®ï¼Œä¸å†èµ˜è¿°ã€‚</p>

<p><img src="/img/content_img/darknet/details.png" alt="" /></p>

<blockquote>
<p>éƒ¨åˆ†ç”¨æˆ·å¡«å†™çš„å‡ºå”®æ•°é‡å¤§çš„è¶…è¿‡äº†é™åˆ¶ï¼ˆè¿‡äºå¤¸å¼ ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦é»˜è®¤ä¸€ä¸ªæœ€å¤§å€¼è¿›è¡Œå¤„ç†</p>
</blockquote>

<p>å½“ç„¶åœ¨å–åˆ°æ•°æ®çš„åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­è¯¥æ•°æ®æ˜¯å¦ä¸ºå…è®¸æé†’èŒƒå›´å†…çš„æ•°æ®ï¼Œå¦‚æœæ˜¯åˆ™é€šè¿‡<code>telebot</code>å‘é€ç»™<code>channel</code>ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># å¦‚æœæ—¶é—´A æ˜¯åœ¨ç›¸å¯¹ä»Šå¤©Bå¤©å‰çš„0ç‚¹ä¹‹å‰å‡ºç°ï¼Œåˆ™å‘é€</span>
<span style="color:#66d9ef">if</span> moment<span style="color:#f92672">.</span>date(A) <span style="color:#f92672">&gt;</span> moment<span style="color:#f92672">.</span>now()<span style="color:#f92672">.</span>replace(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, minutes<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, seconds<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>add(days<span style="color:#f92672">=</span>B):
    telegram<span style="color:#f92672">.</span>delay(msg, sid, Config<span style="color:#f92672">.</span>darknetchannelID)</code></pre></div>
<p>ç„¶åæˆ‘ä»¬çš„å®¢æˆ·ç«¯å°±æ”¶åˆ°äº†åŠæ—¶çš„æé†’ï¼Œäºæ˜¯æ•´ä¸ªé¡¹ç›®å°±å®Œæˆçš„å·®ä¸å¤šäº†ã€‚</p>

<p>åŠ å…¥<strong>channel</strong>: <a href="https://t.me/fordarknetspiderbot">https://t.me/fordarknetspiderbot</a></p>

<p><img src="/img/content_img/darknet/telegram.png" alt="" /></p>

<h1 id="ormæ¨¡å‹">ORMæ¨¡å‹</h1>

<p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡pymysqlè¿æ¥æ•°æ®åº“å¹¶æŸ¥è¯¢æ˜¯å¦å­˜åœ¨è¯¥åº“ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºï¼Œç¼–ç UTF8MB4ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">try</span>:
    con <span style="color:#f92672">=</span> pymysql<span style="color:#f92672">.</span>connect(<span style="color:#f92672">**</span>Links)
    <span style="color:#66d9ef">with</span> con<span style="color:#f92672">.</span>cursor() <span style="color:#66d9ef">as</span> cursor:
        cursor<span style="color:#f92672">.</span>execute(
            f<span style="color:#e6db74">&#39;create database {Config.mysql_db} character set UTF8mb4 collate utf8mb4_bin&#39;</span>)
    con<span style="color:#f92672">.</span>close()
<span style="color:#66d9ef">except</span> pymysql<span style="color:#f92672">.</span>err<span style="color:#f92672">.</span>ProgrammingError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;1007&#39;</span> <span style="color:#f92672">in</span> str(e):
        <span style="color:#66d9ef">pass</span>
<span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">raise</span> e</code></pre></div>
<p>åœ¨å®Œæˆåˆ›å»ºåæˆ‘ä»¬é€šè¿‡<code>peewee</code>æ¥ORMé©±åŠ¨ç”Ÿæˆç›¸åº”è¡¨æ ¼ï¼Œä»¥ä¸‹æ˜¯ç›¸åº”è¡¨çš„ç®€ä»‹ã€‚</p>

<ul>
<li><code>DarkNet_Saler</code> å”®å–è€…ä¿¡æ¯</li>
<li><code>DarkNet_User</code>  çˆ¬è™«ç”¨æˆ·æ± </li>
<li><code>DarkNet_IMGS</code>  æ•°æ®è¯´æ˜ä¿¡æ¯ (é¸¡è‚‹)</li>
<li><code>DarkNet_Notice</code> æ¶ˆæ¯å‘é€è®°å½•</li>
<li><code>DarkNet_DataSale</code> ä¿¡æ¯è¯¦æƒ…</li>
</ul>

<h1 id="ä»£ç è¿è¡Œç»“æœ">ä»£ç è¿è¡Œç»“æœ</h1>

<p>å¯ä»¥çœ‹åˆ°ï¼Œçˆ¬è™«æœ¬èº«ä»¥åŠceleryè¿è¡ŒçŠ¶æ€è‰¯å¥½ã€‚</p>

<p><img src="/img/content_img/darknet/run.png" alt="" /></p>

<h1 id="grafanaå¯è§†åŒ–">Grafanaå¯è§†åŒ–</h1>

<p>ä¸ºäº†è®©æ•°æ®ç»“æœæ›´åŠ ç›´è§‚ï¼Œæˆ‘ä»¬é€šè¿‡grafanaå¿«é€Ÿæ„å»ºå±•ç¤ºç•Œé¢ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯å·æ‡’çš„æ“ä½œã€‚åæœŸä¼šé’ˆå¯¹grafanaä¸“é—¨å†™ä¸€ç¯‡ï¼Œæœ¬ç¯‡ä¸å†èµ˜è¿°ã€‚</p>

<p>æ¡ˆä¾‹åœ°å€: <a href="https://gcokedsa123.grafana.net/dashboard/snapshot/2OJ9OtmtitwiGcIqwIVhvzgmTKDBtTkF?orgId=0">grafana_demo</a></p>

<p><img src="/img/content_img/darknet/grafana.png" alt="" /></p>

<p>æœ€åï¼Œç»†å¿ƒçš„åŒå­¦æ˜¯å¦æœ‰å‘ç°æ–‡ç« å¼€å¤´çš„è´´å›¾æœ‰äº›ï¼Œç‰¹åˆ«ä¹ˆ-v-?</p>

<p>æ›´å¤šåŠæ—¶èµ„è®¯æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·</p>

<p><img src="/img/qrcode.png" alt="qrcode.png" /></p>
		</div>
		
<div class="post__tags tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/darknet/" rel="tag">darknet</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/tor/" rel="tag">tor</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/python/" rel="tag">python</a></li>
	</ul>
</div>
	</article>
</main>


<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/post/2018_11_29_%E5%8A%A8%E5%8A%A8%E6%89%8B%E5%81%9A%E4%B8%80%E4%B8%AAuseragent%E5%BA%93/" rel="prev"><span class="post-nav__caption">Â«&thinsp;Previous</span><p class="post-nav__post-title">åŠ¨åŠ¨æ‰‹åšä¸€ä¸ªUserAgentåº“</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/post/2018_12_26_%E5%87%A0%E6%AC%BE%E6%88%96%E8%AE%B8%E8%83%BD%E6%94%B9%E5%96%84%E7%BC%96%E5%86%99%E6%95%88%E7%8E%87%E7%9A%84%E5%B7%A5%E5%85%B7l1/" rel="next"><span class="post-nav__caption">Next&thinsp;Â»</span><p class="post-nav__post-title">å‡ æ¬¾æˆ–è®¸èƒ½æ”¹å–„ç¼–å†™æ•ˆç‡çš„å·¥å…·(ç¬¬ä¸€æœŸ)</p></a>
	</div>
</nav>

<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-pyocean-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2019 s045pd.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>